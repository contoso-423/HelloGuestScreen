<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hello Guest Screen</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      color: #fff;
      overflow: hidden;
    }

    .slideshow-container {
      position: fixed;
      top: 0;
      left: 0;
      z-index: -1;
      width: 100%;
      height: 100%;
    }

    .slide {
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      position: absolute;
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }

    .slide.active {
      opacity: 1;
    }

    .overlay {
      background-color: rgba(0, 0, 0, 0.6);
      height: 100vh;
      padding: 40px;
      box-sizing: border-box;
      position: relative;
    }

    .logo {
      position: absolute;
      top: 30px;
      left: 40px;
      width: 200px;
      height: auto;
      z-index: 2;
    }

    .welcome-box {
      max-width: 50%;
      padding-top: 150px;
    }

    h1 {
      font-size: 5em;
      margin: 0;
    }

    .info {
      margin: 20px 0;
      font-size: 1.5em;
    }

    .dateTime {
      position: absolute;
      top: 40px;
      right: 40px;
      text-align: right;
      background: rgba(0, 0, 0, 0.0);
      padding: 10px 16px;
      border-radius: 10px;
    }

    .dateTime .time {
      font-size: 3em;
      font-weight: bold;
      line-height: 1.2em;
    }

    .dateTime .date {
      font-size: 2em;
      margin-top: 5px;
    }

    .check-container {
      position: fixed;
      bottom: 40px;
      left: 40px;
      display: flex;
      gap: 30px;
      z-index: 3;
    }

    .check-box {
      background: rgba(0, 0, 0, 0.5);
      padding: 15px 20px;
      border-radius: 10px;
      font-size: 1.6em;
      min-width: 140px;
    }

    .weather-box {
      position: absolute;
      right: 40px;
      bottom: 700px;
      width: 250px;
      background: rgba(0, 0, 0, 0);
      padding: 15px;
      border-radius: 20px;
      z-index: 10;
      box-sizing: border-box;
      text-align: center;
    }

    .weatherwidget-io {
        width: 100% !important;
        height: auto !important;
        min-height: 150px !important;
        border: none !important;
        overflow: hidden !important;
        display: block !important;
    }

    .wifi-box {
      position: absolute;
      bottom: 20px;
      right: 40px;
      text-align: center;
      background: rgba(0, 0, 0, 0.5);
      padding: 15px;
      border-radius: 10px;
      z-index: 3;
    }

    .wifi-box img {
      margin-top: 10px;
      width: 120px;
      height: 120px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
  </style>
</head>
<body>
  <div class="slideshow-container">
    <div class="slide active" style="background-image: url('https://i.imgur.com/pYJ0usW.jpg');"></div>
    <div class="slide" style="background-image: url('https://i.imgur.com/VIzNdzp.jpg');"></div>
    <div class="slide" style="background-image: url('https://i.imgur.com/l91izzR.jpg');"></div>
    <div class="slide" style="background-image: url('https://i.imgur.com/14NKOOG.jpg');"></div>
    <div class="slide" style="background-image: url('https://i.imgur.com/Zq18tnN.jpg');"></div>
    <div class="slide" style="background-image: url('https://i.imgur.com/ApV6up5.jpg');"></div>
    <div class="slide" style="background-image: url('https://i.imgur.com/MIznTTB.jpg');"></div>
  </div>

  <div class="overlay">
    <img class="logo" src="https://i.imgur.com/4eB2t7x.png" alt="Resort Logo" />
    
    <div class="welcome-box">
      <h1 id="greeting">Welcome, Guest</h1>
      <div class="info" id="details">Loading guest info...</div>
    </div>

    <div class="dateTime">
      <div class="time" id="timePart"></div>
      <div class="date" id="datePart"></div>
    </div>

	<div class="weather-box">
      <a class="weatherwidget-io"
           href="https://forecast7.com/en/10d61123d89/cebu/"
           data-label_1="Mantalongon, Dalaguete"
           data-label_2="WEATHER"
           data-mode="Current"
           data-days="3"
           data-textcolor="#fcfafa">
           Mantalongon, Dalaguete WEATHER
      </a>
    </div>

    <div class="wifi-box" id="wifiInfo">
      <div id="wifiText"></div>
      <img id="wifiQR" src="" alt="WiFi QR Code" />
    </div>

    <div class="check-container" id="checkInfo">
      <div class="check-box" id="checkIn"></div>
      <div class="check-box" id="checkOut"></div>
    </div>
  </div>

  <script>
    // --- Fullscreen Functionality (Removed) ---
    // The code for attempting to enter fullscreen has been removed as per request.
    // For dedicated displays, consider using browser kiosk mode instead.

    // --- Auto-Refresh Functionality ---
    const AUTO_REFRESH_INTERVAL_SECONDS = 120; // Refresh every 2 minutes (120 seconds)
    setTimeout(() => {
        location.reload();
    }, AUTO_REFRESH_INTERVAL_SECONDS * 1000); // Convert seconds to milliseconds

    // --- Slideshow Functionality ---
    let slideIndex = 0;
    const slides = document.querySelectorAll('.slide');
    setInterval(() => {
      slides[slideIndex].classList.remove('active');
      slideIndex = (slideIndex + 1) % slides.length;
      slides[slideIndex].classList.add('active');
    }, 5000);

    // --- Guest Data Fetching ---
    const roomNumber = "101"; // Change this dynamically for each room
    const scriptUrl = "https://script.google.com/macros/s/AKfycbwFdJJP6bF7Xny7l4qJEZP4de6u-quGeT_zGUAPY0JCFT9gMtWnbg4LFTBP0-F565F6/exec";

    fetch(scriptUrl)
      .then(res => res.json())
      .then(data => {
        const guest = data.find(item => item.Room === roomNumber);
        if (!guest) {
          document.getElementById("details").innerHTML = "Guest not found.";
          return;
        }

        document.getElementById("greeting").textContent = `Welcome, ${guest.Name}`;
        document.getElementById("details").innerHTML = `
          <p>On behalf of the entire team, a heartfelt welcome to <strong>150 Peakway Mountain Resort!</strong></p>
          <p>We are absolutely delighted to have you join us and hope your journey here was as pleasant as the stunning views that await you.</p>
          <p>Nestled amidst the majestic peaks and serene landscapes, our resort is designed to be your perfect escape. Whether you're seeking adventure on the trails, peaceful moments by the fireplace, or simply a refreshing break from the everyday, we are here to ensure your stay is nothing short of extraordinary.</p>
          <p>Please take a moment to unwind, breathe in the crisp mountain air, and make yourself at home. Our dedicated staff is committed to providing you with exceptional service and a memorable experience. Should you need anything at all, from local recommendations to an extra pillow, please do not hesitate to reach out.</p>
          <p><strong>We wish you a truly wonderful and rejuvenating stay.</strong></p>
        `;

        const ssid = guest["WiFi Name"] || "No SSID";
        const password = guest["Wifi Password"] || "No Password";

        document.getElementById("wifiText").innerHTML = `
          WiFi Name: <strong>${ssid}</strong><br/>
          Password: <strong>${password}</strong>
        `;

        const qrData = `WIFI:T:WPA;S:${ssid};P:${password};;`;
        const qrURL = `https://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(qrData)}&size=200x200`;
        document.getElementById("wifiQR").src = qrURL;

        document.getElementById("checkIn").innerHTML = `<strong>Check-In</strong><br/>${guest["Check-in"]}`;
        document.getElementById("checkOut").innerHTML = `<strong>Check-Out</strong><br/>${guest["Check-out"]}`;
      })
      .catch(error => {
          console.error("Error fetching guest data:", error);
          document.getElementById("details").innerHTML = "Failed to load guest information. Please contact the front desk.";
      });

    // --- Clock Functionality ---
    function updateClock() {
      const now = new Date();
      const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      const date = now.toLocaleDateString(undefined, { weekday: 'long', month: 'long', day: 'numeric' });
      document.getElementById("timePart").innerText = time;
      document.getElementById("datePart").innerText = date;
    }

    updateClock();
    setInterval(updateClock, 60000); // Clock updates every minute
  </script>

  <script>
  !function(d,s,id){
    var js,fjs=d.getElementsByTagName(s)[0];
    if(!d.getElementById(id)){
      js=d.createElement(s); js.id=id;
      js.src='https://weatherwidget.io/js/widget.min.js';
      fjs.parentNode.insertBefore(js,fjs);
    }
  }(document,'script','weatherwidget-io-js');
  </script>
</body>
</html>
